<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Contact Salatiso OHS Tools to collaborate, inquire about book discounts, or share suggestions for improving occupational health and safety in workplaces and communities.">
    <meta name="keywords" content="OHS tools, occupational health and safety, safety plans, South Africa OHS, Salatiso, contact">
    <meta name="author" content="Salatiso Lonwabo Mdeni">
    <title>Salatiso OHS Tools - Contact</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500;700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles can be added here if needed, complementing Tailwind */
        body {
            font-family: 'Open Sans', sans-serif;
        }
        header h1, .sidebar h2, .sidebar h3, .intro h2, footer h3 {
            font-family: 'Montserrat', sans-serif;
        }
        /* Adjustments for fixed header and sidebar */
        body {
            padding-top: 80px; /* Adjust based on actual header height */
            display: flex;
        }
        .sidebar {
            position: fixed;
            top: 80px; /* Match body padding-top */
            left: 0;
            bottom: 0;
            width: 250px; /* Fixed sidebar width */
            overflow-y: auto;
            z-index: 40; /* Below header */
        }
        .main-content {
            margin-left: 250px; /* Same as sidebar width */
            flex-grow: 1; /* Take remaining space */
            padding: 1.5rem; /* Equivalent to p-6 */
            min-height: calc(100vh - 80px); /* Full height minus header */
            display: flex;
            flex-direction: column;
        }
        .intro {
            flex-grow: 1; /* Allow intro section to fill space */
        }
        header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 50; /* Ensure header is on top */
        }
        /* Chatbot styles */
        .chatbot-container {
            position: fixed;
            bottom: 1.25rem; /* Equivalent to bottom-5 */
            right: 1.25rem; /* Equivalent to right-5 */
            z-index: 1000;
        }
        #chat-window {
            width: 300px;
            max-height: 400px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }
        .chat-hidden {
            display: none;
        }
        #chat-output {
            flex-grow: 1;
        }
        #chat-input-container {
            display: flex;
            border-top-width: 1px;
        }
        #chat-input {
            flex-grow: 1;
            border: none;
            padding: 0.5rem; /* p-2 */
        }
        #chat-send {
            border: none;
            padding: 0.5rem 1rem; /* p-2 px-4 */
            cursor: pointer;
        }
        /* Carousel styles */
        .carousel {
            position: relative;
            overflow: hidden;
            width: 100%;
            max-width: 600px;
            margin: 0 auto;
        }
        .carousel-inner {
            display: flex;
            transition: transform 0.5s ease-in-out;
        }
        .carousel-item {
            min-width: 100%;
            box-sizing: border-box;
            padding: 1rem;
            background-color: #f9f9f9;
            border-radius: 8px;
            text-align: center;
        }
        .carousel-button {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background-color: rgba(0, 0, 0, 0.5);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            cursor: pointer;
            z-index: 10;
        }
        .carousel-button.prev {
            left: 0;
        }
        .carousel-button.next {
            right: 0;
        }
        .more-info-content {
            display: none;
            margin-top: 1rem;
            text-align: left;
        }
        .more-info-content.visible {
            display: block;
        }
        .intro-content {
            display: none;
        }
        .intro-content.visible {
            display: block;
        }
        /* Responsive adjustments */
        @media (max-width: 768px) {
            body {
                padding-top: 0; /* Remove top padding */
                flex-direction: column; /* Stack elements vertically */
            }
            header {
                position: relative; /* Make header part of the flow */
            }
            .sidebar {
                position: relative; /* Make sidebar part of the flow */
                top: 0;
                width: 100%;
                height: auto;
                bottom: auto;
                z-index: 1; /* Reset z-index */
            }
            .main-content {
                margin-left: 0; /* Remove left margin */
                min-height: auto; /* Adjust min-height */
            }
            .intro {
                margin: 1rem; /* Adjust margin */
            }
        }
    </style>
</head>
<body class="bg-gray-100">
    <header class="bg-gray-900 text-white shadow-md">
        <div class="container mx-auto px-6 py-4 flex flex-col md:flex-row justify-between items-center">
            <div class="logo-placeholder bg-white text-gray-800 p-2 rounded text-sm text-center w-full md:w-auto mb-4 md:mb-0 md:mr-6">
                [Logo Placeholder - Reserved for Salatiso OHS Tools Logo]
            </div>
            <div class="header-content flex-grow w-full">
                <h1 class="text-3xl font-bold mb-2 text-center md:text-left">Salatiso OHS Tools</h1>
                <nav role="navigation" aria-label="Main navigation" class="flex flex-col md:flex-row justify-between items-center w-full">
                    <div class="nav-links mb-4 md:mb-0">
                        <a href="/safety-plans/index.html" class="px-3 py-2 hover:text-blue-400">Home</a>
                        <a href="/safety-plans/resources.html" class="px-3 py-2 hover:text-blue-400">Resources</a>
                        <a href="/safety-plans/services.html" class="px-3 py-2 hover:text-blue-400">Services</a>
                        <a href="/safety-plans/community.html" class="px-3 py-2 hover:text-blue-400">Community</a>
                        <a href="/safety-plans/about.html" class="px-3 py-2 hover:text-blue-400">About</a>
                        <a href="/safety-plans/contact.html" class="px-3 py-2 hover:text-blue-400">Contact</a>
                    </div>
                    <div class="search-bar w-full md:w-auto">
                        <form role="search" class="flex">
                            <input type="text" placeholder="Search OHS Tools..." aria-label="Search OHS Tools" class="px-3 py-1 border border-gray-300 rounded-l text-gray-800 flex-grow">
                            <button type="submit" aria-label="Search" class="px-4 py-1 bg-blue-500 hover:bg-blue-600 text-white rounded-r">Search</button>
                        </form>
                    </div>
                </nav>
            </div>
        </div>
    </header>

    <aside class="sidebar bg-gray-900 text-gray-200 p-5">
        <h2 data-i18n="sidebar.ohs_tools" class="text-2xl font-bold mb-6 text-white">OHS Tools</h2>
        <ul class="space-y-2">
            <li><a href="/safety-plans/pages/construction-compliance.html" data-i18n="sidebar.construction_safety" class="block py-2 px-1 hover:text-blue-400">Construction Safety</a></li>
            <li><a href="/safety-plans/pages/emergency-response-plan.html" data-i18n="sidebar.emergency_planning" class="block py-2 px-1 hover:text-blue-400">Emergency Planning</a></li>
            <li><a href="/safety-plans/pages/risk-assessment.html" data-i18n="sidebar.risk_assessment" class="block py-2 px-1 hover:text-blue-400">Risk Assessment</a></li>
            <li><a href="/safety-plans/pages/legal-appointments.html" data-i18n="sidebar.legal_appointments" class="block py-2 px-1 hover:text-blue-400">Legal Appointments</a></li>
            <li><a href="/safety-plans/pages/incident-management.html" data-i18n="sidebar.incident_management" class="block py-2 px-1 hover:text-blue-400">Incident Management</a></li>
            <li><a href="/safety-plans/pages/training.html" data-i18n="sidebar.training" class="block py-2 px-1 hover:text-blue-400">Training</a></li>
            <li><a href="/safety-plans/pages/inspections-audits.html" data-i18n="sidebar.inspections_audits" class="block py-2 px-1 hover:text-blue-400">Inspections \& Audits</a></li>
            <li><a href="/safety-plans/pages/suppliers.html" data-i18n="sidebar.suppliers" class="block py-2 px-1 hover:text-blue-400">Suppliers</a></li>
            <li><a href="/safety-plans/pages/legislation.html" data-i18n="sidebar.legislation" class="block py-2 px-1 hover:text-blue-400">Legislation</a></li>
            <li><a href="/safety-plans/pages/community-tools.html" data-i18n="sidebar.community_tools" class="block py-2 px-1 hover:text-blue-400">Community Tools</a></li>
            <li><a href="/safety-plans/pages/member-dashboard.html" data-i18n="sidebar.member_dashboard" class="block py-2 px-1 hover:text-blue-400">Member Dashboard</a></li>
            <li><a href="/safety-plans/pages/ohs-system.html" data-i18n="sidebar.ohs_system" class="block py-2 px-1 hover:text-blue-400 active">OHS System</a></li>
        </ul>
        <div class="step-info mt-8 p-4 bg-gray-800 rounded">
            <h3 data-i18n="sidebar.step_0.title" class="text-lg font-semibold mb-2 text-white">üìú Welcome to Salatiso OHS Tools</h3>
            <p data-i18n="sidebar.step_0.description" class="text-sm mb-3">Explore our comprehensive tools and resources to enhance occupational health and safety in your workplace.</p>
            <p class="fun-fact text-sm text-blue-300" data-i18n="sidebar.step_0.fun_fact">‚ö° Did you know using reputable ethical suppliers can reduce workplace hazards by ensuring work is done on time and to the highest quality and safety standards?</p>
        </div>
    </aside>

    <div class="main-content bg-gray-100">
        <section class="intro bg-white p-8 rounded-lg shadow-md mb-6">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">Contact Us</h2>
            <p class="text-gray-600 mb-4">
                At Salatiso OHS Tools, we aim to make OHS compliance easy and accessible, empowering communities to improve health and safety everywhere‚Äîfrom homes to churches, spaza shops to traditional ceremonies.
                <a href="#" class="text-blue-500 hover:underline ml-2" id="toggleIntro">Read More</a>
            </p>
            <div id="introMoreContent" class="intro-content text-gray-600 mb-4">
                Our vision is to create a safer world by providing tools and resources that simplify compliance and foster a culture of safety. In the future, we plan to introduce mentorship programs, professional profiles, skills and job listings for candidates and employers, and collaboration opportunities to further enhance community safety. Join us in this mission by sharing your ideas and exploring partnership possibilities!
            </div>

            <div class="carousel mb-8">
                <div class="carousel-inner" id="carouselInner">
                    <div class="carousel-item">
                        <h3 class="text-xl font-semibold text-gray-800 mb-2">Salatiso</h3>
                        <p class="text-gray-600 mb-4">Explore our core platform dedicated to innovative OHS solutions and community empowerment.</p>
                        <a href="#" class="text-blue-500 hover:underline" onclick="toggleMoreInfo('salatisoMore')">More Info</a>
                        <div id="salatisoMore" class="more-info-content text-gray-600">
                            Salatiso.com is the foundation of our mission, offering tools and resources to enhance occupational health and safety across various sectors. Visit us to learn more about our initiatives and how you can get involved.
                            <a href="https://salatiso.com/" target="_blank" class="text-blue-500 hover:underline block mt-2">Visit Salatiso.com</a>
                        </div>
                    </div>
                    <div class="carousel-item">
                        <h3 class="text-xl font-semibold text-gray-800 mb-2">Sazi Life</h3>
                        <p class="text-gray-600 mb-4">Discover a platform focused on holistic wellness, safety education, and community support.</p>
                        <a href="#" class="text-blue-500 hover:underline" onclick="toggleMoreInfo('saziMore')">More Info</a>
                        <div id="saziMore" class="more-info-content text-gray-600">
                            Sazi.life promotes a balanced approach to safety and well-being, providing educational content and community-driven initiatives to foster safer living environments. Check it out to see how you can contribute to a safer lifestyle.
                            <a href="https://sazi.life/" target="_blank" class="text-blue-500 hover:underline block mt-2">Visit Sazi.life</a>
                        </div>
                    </div>
                    <div class="carousel-item">
                        <h3 class="text-xl font-semibold text-gray-800 mb-2">Flamea</h3>
                        <p class="text-gray-600 mb-4">Learn about our initiatives to ignite change through safety advocacy and education.</p>
                        <a href="#" class="text-blue-500 hover:underline" onclick="toggleMoreInfo('flameaMore')">More Info</a>
                        <div id="flameaMore" class="more-info-content text-gray-600">
                            Flamea.org is dedicated to sparking change by advocating for safety education and awareness. Join our movement to make safety a priority in every aspect of life.
                            <a href="https://flamea.org/" target="_blank" class="text-blue-500 hover:underline block mt-2">Visit Flamea.org</a>
                        </div>
                    </div>
                </div>
                <button class="carousel-button prev" onclick="moveCarousel(-1)">&#10094;</button>
                <button class="carousel-button next" onclick="moveCarousel(1)">&#10095;</button>
            </div>

            <form class="mt-8 space-y-4" id="contactForm" action="mailto:salatiso@salatiso.com?cc=salatiso.mdeni@gmail.com" method="post" enctype="text/plain">
                <h3 class="text-xl font-semibold text-gray-700 mb-3">Join Us in Making a Difference</h3>
                <p class="text-gray-600 mb-4">
                    Your voice matters! Share your comments, suggestions, or inquire about book discounts below. We also welcome collaboration opportunities to further our mission of enhancing safety. By contributing, you‚Äôre helping build safer communities‚Äîthank you for being part of this journey!
                </p>
                <div>
                    <label for="name" class="block text-sm font-medium text-gray-700">Name</label>
                    <input type="text" id="name" name="name" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                </div>
                <div>
                    <label for="email_contact" class="block text-sm font-medium text-gray-700">Email (Optional)</label>
                    <input type="email" id="email_contact" name="email" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                    <div class="mt-2">
                        <label class="flex items-center">
                            <input type="checkbox" id="emailConsent" name="emailConsent" class="mr-2">
                            <span class="text-sm text-gray-600">I consent to providing my email for feedback purposes. I understand that without an email, feedback cannot be provided.</span>
                        </label>
                    </div>
                </div>
                <div>
                    <label for="message" class="block text-sm font-medium text-gray-700">Message</label>
                    <textarea id="message" name="message" rows="4" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm" placeholder="Share your comments, suggestions, book discount inquiries, or collaboration ideas..."></textarea>
                </div>
                <div>
                    <button type="submit" class="inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-500 hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                        Submit
                    </button>
                </div>
            </form>
        </section>

        <footer class="bg-gray-900 text-white py-8 mt-auto">
            <div class="container mx-auto px-6 text-center">
                <p class="mb-2">¬© 2025 Salatiso OHS Tools. All rights reserved.</p>
                <p class="mb-4">
                    <a href="/safety-plans/privacy.html" class="mx-2 hover:text-blue-400">Privacy Policy</a> |
                    <a href="/safety-plans/terms.html" class="mx-2 hover:text-blue-400">Terms of Service</a> |
                    <a href="/safety-plans/contact.html" class="mx-2 hover:text-blue-400">Contact Us</a>
                </p>
                <div class="newsletter mt-6">
                    <h3 class="text-lg font-semibold mb-3">Stay Updated</h3>
                    <form class="flex justify-center">
                        <input type="email" placeholder="Enter your email" aria-label="Email for newsletter" class="px-3 py-2 border border-gray-300 rounded-l text-gray-800 w-64">
                        <button type="submit" class="px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-r">Subscribe</button>
                    </form>
                </div>
            </div>
        </footer>
    </div>

    <div class="chatbot-container">
        <button id="chat-toggle" class="chat-toggle-btn bg-blue-500 hover:bg-blue-600 text-white p-3 rounded-full shadow-lg flex items-center justify-center">
            <span class="chat-icon text-2xl mr-1">‚õëÔ∏è</span> Ask Me
        </button>
        <div id="chat-window" class="chat-hidden bg-white border border-gray-300 rounded-lg shadow-xl">
            <div id="chat-output" class="p-3 text-sm h-80 overflow-y-scroll">
                <p><strong>Chatbot:</strong> Hello! How can I help you with OHS today?</p>
            </div>
            <div id="chat-input-container" class="flex border-t border-gray-200">
                <input id="chat-input" type="text" placeholder="Ask about OHS..." aria-label="Ask about OHS" class="flex-grow p-2 border-none focus:outline-none">
                <button id="chat-send" aria-label="Send message" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 border-none cursor-pointer">Send</button>
            </div>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script>
        // Firebase Config - IMPORTANT: Use environment variables or a secure config method in production
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY", // Replace with your actual API key
            authDomain: "YOUR_AUTH_DOMAIN", // Replace
            projectId: "YOUR_PROJECT_ID", // Replace
            storageBucket: "YOUR_STORAGE_BUCKET", // Replace
            messagingSenderId: "YOUR_MESSAGING_SENDER_ID", // Replace
            appId: "YOUR_APP_ID", // Replace
            measurementId: "YOUR_MEASUREMENT_ID" // Optional
        };

        let db; // Declare db globally

        // Initialize Firebase with error handling
        try {
            firebase.initializeApp(firebaseConfig);
            db = firebase.firestore(); // Assign firestore instance
            console.log("Firebase Initialized Successfully");
        } catch (error) {
            console.error("Firebase initialization failed:", error);
            const chatOutput = document.getElementById('chat-output');
            if (chatOutput) {
                chatOutput.innerHTML += "<p class='text-red-600'><strong>Error:</strong> Chatbot unavailable due to configuration issue.</p>";
            }
            const chatInput = document.getElementById('chat-input');
            const chatSend = document.getElementById('chat-send');
            if (chatInput) chatInput.disabled = true;
            if (chatSend) chatSend.disabled = true;
        }

        // Elements
        const chatToggle = document.getElementById('chat-toggle');
        const chatWindow = document.getElementById('chat-window');
        const chatOutput = document.getElementById('chat-output');
        const chatInput = document.getElementById('chat-input');
        const chatSend = document.getElementById('chat-send');

        // Toggle Chat Window
        if (chatToggle) {
            chatToggle.addEventListener('click', () => {
                chatWindow.classList.toggle('chat-hidden');
                if (!chatWindow.classList.contains('chat-hidden')) {
                    chatInput.focus();
                }
            });
        }

        // Function to add message to chat output
        function addChatMessage(sender, message) {
            if (chatOutput) {
                const messageElement = document.createElement('p');
                messageElement.classList.add('mb-2');
                messageElement.innerHTML = `<strong>${sender}:</strong> ${message}`;
                chatOutput.appendChild(messageElement);
                chatOutput.scrollTop = chatOutput.scrollHeight;
            }
        }

        // Send Question to Chatbot
        async function sendQuery() {
            if (!db) {
                addChatMessage('Chatbot', 'Sorry, the chatbot is currently unavailable.');
                return;
            }
            const input = chatInput.value.trim();
            if (!input) return;
            addChatMessage('You', input);
            chatInput.value = '';
            addChatMessage('Chatbot', 'Searching...');
            const query = input.toLowerCase();

            try {
                const snapshot = await db.collection('ohs-knowledge')
                                         .where('keywords', 'array-contains', query)
                                         .limit(1)
                                         .get();
                let responseFound = false;
                let response = "Sorry, I couldn‚Äôt find specific information on that topic. Please try rephrasing or ask a different question.";

                if (!snapshot.empty) {
                    snapshot.forEach(doc => {
                        const data = doc.data();
                        response = `Based on information from ${data.book || 'our resources'} (Chapter ${data.chapter || 'N/A'}), here's a summary: <br>${data.content.substring(0, 250)}...`;
                        if (data.file) {
                            response += ` (See <a href="/safety-plans/resources/${data.file}" target="_blank" class="text-blue-500 hover:underline">full chapter</a>)`;
                        }
                        responseFound = true;
                    });
                }

                const searchingMessage = chatOutput.querySelector('p:last-child');
                if(searchingMessage && searchingMessage.textContent.includes('Searching...')) {
                    searchingMessage.innerHTML = `<strong>Chatbot:</strong> ${response}`;
                } else {
                    addChatMessage('Chatbot', response);
                }
            } catch (error) {
                console.error("Firestore query failed:", error);
                const searchingMessage = chatOutput.querySelector('p:last-child');
                if(searchingMessage && searchingMessage.textContent.includes('Searching...')) {
                    searchingMessage.innerHTML = `<strong>Chatbot:</strong> Oops, something went wrong while searching. Please try again!`;
                } else {
                    addChatMessage('Chatbot', 'Oops, something went wrong while searching. Please try again!');
                }
            }
        }

        // Event listeners for chatbot
        if (chatSend) chatSend.addEventListener('click', sendQuery);
        if (chatInput) chatInput.addEventListener('keypress', (event) => { if (event.key === 'Enter') sendQuery(); });

        // Carousel functionality
        let currentIndex = 0;
        const carouselInner = document.getElementById('carouselInner');
        const items = carouselInner.children;
        const totalItems = items.length;

        function moveCarousel(direction) {
            currentIndex = (currentIndex + direction + totalItems) % totalItems;
            carouselInner.style.transform = `translateX(-${currentIndex * 100}%)`;
        }

        // Auto-slide every 5 seconds
        setInterval(() => moveCarousel(1), 5000);

        // Toggle more info for carousel items
        function toggleMoreInfo(id) {
            const element = document.getElementById(id);
            element.classList.toggle('visible');
        }

        // Toggle introduction content
        document.getElementById('toggleIntro').addEventListener('click', (e) => {
            e.preventDefault();
            const moreContent = document.getElementById('introMoreContent');
            moreContent.classList.toggle('visible');
            e.target.textContent = moreContent.classList.contains('visible') ? 'Read Less' : 'Read More';
        });

        // Form submission with consent validation
        document.getElementById('contactForm').addEventListener('submit', (e) => {
            const email = document.getElementById('email_contact').value;
            const consent = document.getElementById('emailConsent').checked;
            if (email && !consent) {
                e.preventDefault();
                alert('Please consent to providing your email address to receive feedback, or leave the email field blank.');
            }
        });
    </script>
</body>
</html>
