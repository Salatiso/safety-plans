<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="page_title.construction">SafetyHelp - Construction Health and Safety</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="/safety-plans/assets/css/construction-compliance.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://unpkg.com/i18next@21.6.14/dist/umd/i18next.min.js"></script>
    <script src="https://unpkg.com/i18next-http-backend@1.4.0/dist/i18nextHttpBackend.min.js"></script>
    <script src="https://unpkg.com/axios@0.26.0/dist/axios.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-analytics.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body class="bg-gray-100 font-sans">
    <header class="bg-blue-600 text-white py-4 shadow-md">
        <div class="container mx-auto px-4 flex justify-between items-center">
            <div>
                <h1 class="text-2xl font-bold" data-i18n="header.title">SafetyHelp</h1>
                <p class="text-sm" data-i18n="header.tagline">Safety Personalized, Compliance Simplified‚ÄîAnytime, Anywhere</p>
            </div>
            <nav>
                <ul class="flex space-x-4">
                    <li><a href="/safety-plans/index.html" class="hover:underline" data-i18n="header.nav.home">Home</a></li>
                    <li><a href="/safety-plans/resources.html" class="hover:underline" data-i18n="header.nav.resources">Resources</a></li>
                    <li><a href="/safety-plans/services.html" class="hover:underline" data-i18n="header.nav.services">Services</a></li>
                    <li><a href="/safety-plans/community.html" class="hover:underline" data-i18n="header.nav.community">Community</a></li>
                    <li><a href="/safety-plans/about.html" class="hover:underline" data-i18n="header.nav.about">About</a></li>
                    <li><a href="/safety-plans/contact.html" class="hover:underline" data-i18n="header.nav.contact">Contact</a></li>
                    <li><a href="/safety-plans/login.html" class="hover:underline" data-i18n="header.nav.login">Login</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main class="container mx-auto px-4 py-8">
        <section class="intro mb-8">
            <h2 class="text-3xl font-bold mb-4" data-i18n="construction.title">Construction Health and Safety</h2>
            <p class="text-gray-600 mb-4" data-i18n="construction.description">Ensure compliance with construction health and safety regulations using SafetyHelp OHS Tools. Our resources help you manage risks, comply with legal requirements, and protect workers on-site, drawing from best practices outlined in 'Safety First: The Essentials of OHS Plans.'</p>
            <p class="text-gray-600" data-i18n="intro.download_link">Download the Construction OHS Plan: <a href="/safety-plans/generated/OHS_Plan_Fillable.pdf" class="text-blue-500 hover:underline">Click Here</a></p>
        </section>

        <section class="wizard bg-white p-6 rounded-lg shadow-md mb-8">
            <h3 class="text-2xl font-semibold mb-4" data-i18n="wizard.step_1.title">Step 1 of 9: What do you want to do?</h3>
            <div id="wizard" class="space-y-4">
                <div id="step-0" class="step">
                    <p data-i18n="wizard.step_0">Please select an action to start the process.</p>
                </div>
                <div id="step-1" class="step hidden">
                    <label class="block text-gray-700 font-medium mb-2" data-i18n="wizard.step_1.label">Select the Documents you will Compile (Select all that apply):</label>
                    <table class="w-full border-collapse">
                        <thead>
                            <tr>
                                <th class="border border-gray-200 p-2"></th>
                                <th class="border border-gray-200 p-2 text-left">Document</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="border border-gray-200 p-2">
                                    <input type="checkbox" id="health-safety-specification-template" name="documents" value="health-safety-specification-template" class="h-4 w-4 text-blue-500 border-gray-300 rounded focus:ring-blue-500">
                                </td>
                                <td class="border border-gray-200 p-2 document-name" data-i18n="wizard.step_1.health_safety_specification_template"><span class="emoji">üìã</span> Health and Safety Specification</td>
                            </tr>
                            <tr>
                                <td class="border border-gray-200 p-2">
                                    <input type="checkbox" id="construction-health-safety-plan-template" name="documents" value="construction-health-safety-plan-template" class="h-4 w-4 text-blue-500 border-gray-300 rounded focus:ring-blue-500">
                                </td>
                                <td class="border border-gray-200 p-2 document-name" data-i18n="wizard.step_1.construction_health_safety_plan_template"><span class="emoji">üìë</span> Health and Safety Plan</td>
                            </tr>
                            <tr>
                                <td class="border border-gray-200 p-2">
                                    <input type="checkbox" id="baseline-risk-assessment-template" name="documents" value="baseline-risk-assessment-template" class="h-4 w-4 text-blue-500 border-gray-300 rounded focus:ring-blue-500">
                                </td>
                                <td class="border border-gray-200 p-2 document-name" data-i18n="wizard.step_1.baseline_risk_assessment_template"><span class="emoji">‚ö†Ô∏è</span> Baseline Risk Assessment</td>
                            </tr>
                            <tr>
                                <td class="border border-gray-200 p-2">
                                    <input type="checkbox" id="risk-assessment-plan-template" name="documents" value="risk-assessment-plan-template" class="h-4 w-4 text-blue-500 border-gray-300 rounded focus:ring-blue-500">
                                </td>
                                <td class="border border-gray-200 p-2 document-name" data-i18n="wizard.step_1.risk_assessment_plan_template"><span class="emoji">‚ö†Ô∏è</span> Risk Assessment Plan</td>
                            </tr>
                            <tr>
                                <td class="border border-gray-200 p-2">
                                    <input type="checkbox" id="ohs-training-competency-policy-template" name="documents" value="ohs-training-competency-policy-template" class="h-4 w-4 text-blue-500 border-gray-300 rounded focus:ring-blue-500">
                                </td>
                                <td class="border border-gray-200 p-2 document-name" data-i18n="wizard.step_1.ohs_training_competency_policy_template"><span class="emoji">üéì</span> Training Policy</td>
                            </tr>
                            <tr>
                                <td class="border border-gray-200 p-2">
                                    <input type="checkbox" id="section-16-1-appointment-template" name="documents" value="section-16-1-appointment-template" class="h-4 w-4 text-blue-500 border-gray-300 rounded focus:ring-blue-500">
                                </td>
                                <td class="border border-gray-200 p-2 document-name" data-i18n="wizard.step_1.section_16_1_appointment_template"><span class="emoji">üìú</span> Section 16(1) Appointment</td>
                            </tr>
                            <tr>
                                <td class="border border-gray-200 p-2">
                                    <input type="checkbox" id="ohs-audit-inspection-standard-template" name="documents" value="ohs-audit-inspection-standard-template" class="h-4 w-4 text-blue-500 border-gray-300 rounded focus:ring-blue-500">
                                </td>
                                <td class="border border-gray-200 p-2 document-name" data-i18n="wizard.step_1.ohs_audit_inspection_standard_template"><span class="emoji">üîç</span> Inspections/Audits Standard</td>
                            </tr>
                            <tr>
                                <td class="border border-gray-200 p-2">
                                    <input type="checkbox" id="ohs-incident-management-standard-template" name="documents" value="ohs-incident-management-standard-template" class="h-4 w-4 text-blue-500 border-gray-300 rounded focus:ring-blue-500">
                                </td>
                                <td class="border border-gray-200 p-2 document-name" data-i18n="wizard.step_1.ohs_incident_management_standard_template"><span class="emoji">üöë</span> Incident Management Standard</td>
                            </tr>
                            <tr>
                                <td class="border border-gray-200 p-2">
                                    <input type="checkbox" id="ohs-contractor-management-policy-template" name="documents" value="ohs-contractor-management-policy-template" class="h-4 w-4 text-blue-500 border-gray-300 rounded focus:ring-blue-500">
                                </td>
                                <td class="border border-gray-200 p-2 document-name" data-i18n="wizard.step_1.ohs_contractor_management_policy_template"><span class="emoji">ü§ù</span> Contractor Management Policy</td>
                            </tr>
                        </tbody>
                    </table>
                    <p id="step-1-error" class="text-red-500 hidden" data-i18n="wizard.step_1.error">Please select at least one document to compile.</p>
                </div>
                <div id="step-2" class="step hidden">
                    <h4 class="text-xl font-semibold mb-2" data-i18n="wizard.step_2.title">Step 2 of 9: Client Details</h4>
                    <form id="client-details-form" class="space-y-4">
                        <div>
                            <label for="client-name" class="block text-gray-700" data-i18n="wizard.step_2.client_name_label">Client Company Name:</label>
                            <input type="text" id="client-name" name="client-name" class="w-full border rounded p-2">
                            <p id="client-name-error" class="text-red-500 hidden" data-i18n="wizard.step_2.client_name_error">Please enter the client company name.</p>
                        </div>
                        <div>
                            <label for="client-address" class="block text-gray-700" data-i18n="wizard.step_2.client_address_label">Client Address:</label>
                            <input type="text" id="client-address" name="client-address" class="w-full border rounded p-2">
                            <p id="client-address-error" class="text-red-500 hidden" data-i18n="wizard.step_2.client_address_error">Please enter the client address.</p>
                        </div>
                        <div>
                            <label for="client-contact-person" class="block text-gray-700" data-i18n="wizard.step_2.client_contact_person_label">Client Contact Person:</label>
                            <input type="text" id="client-contact-person" name="client-contact-person" class="w-full border rounded p-2">
                            <p id="client-contact-person-error" class="text-red-500 hidden" data-i18n="wizard.step_2.client_contact_person_error">Please enter the client contact person.</p>
                        </div>
                        <div>
                            <label for="client-contact-role" class="block text-gray-700" data-i18n="wizard.step_2.client_contact_role_label">Client Contact Role:</label>
                            <input type="text" id="client-contact-role" name="client-contact-role" class="w-full border rounded p-2">
                            <p id="client-contact-role-error" class="text-red-500 hidden" data-i18n="wizard.step_2.client_contact_role_error">Please enter the client contact role.</p>
                        </div>
                        <div>
                            <label for="client-contact-number" class="block text-gray-700" data-i18n="wizard.step_2.client_contact_number_label">Client Contact Number:</label>
                            <input type="tel" id="client-contact-number" name="client-contact-number" class="w-full border rounded p-2">
                            <p id="client-contact-number-error" class="text-red-500 hidden" data-i18n="wizard.step_2.client_contact_number_error">Please enter a valid phone number (e.g., +27123456789).</p>
                        </div>
                        <div>
                            <label for="client-email" class="block text-gray-700" data-i18n="wizard.step_2.client_email_label">Client Email:</label>
                            <input type="email" id="client-email" name="client-email" class="w-full border rounded p-2">
                            <p id="client-email-error" class="text-red-500 hidden" data-i18n="wizard.step_2.client_email_error">Please enter a valid email address.</p>
                        </div>
                        <div>
                            <label for="client-coida" class="block text-gray-700" data-i18n="wizard.step_2.client_coida_label">COIDA Registration Number:</label>
                            <input type="text" id="client-coida" name="client-coida" class="w-full border rounded p-2">
                            <p id="client-coida-error" class="text-red-500 hidden" data-i18n="wizard.step_2.client_coida_error">Please enter the COIDA registration number.</p>
                        </div>
                    </form>
                </div>
                <div id="step-3" class="step hidden">
                    <h4 class="text-xl font-semibold mb-2" data-i18n="wizard.step_3.title">Step 3 of 9: Is a Contractor Appointed?</h4>
                    <form id="contractor-appointed-form" class="space-y-4">
                        <div>
                            <label class="block text-gray-700" data-i18n="wizard.step_3.contractor_appointed_label">Contractor Appointed:</label>
                            <select id="contractor-appointed" name="contractor-appointed" class="w-full border rounded p-2">
                                <option value="" disabled selected>Select an option</option>
                                <option value="yes" data-i18n="wizard.step_3.option_yes">Yes</option>
                                <option value="no" data-i18n="wizard.step_3.option_no">No</option>
                                <option value="not-applicable" data-i18n="wizard.step_3.option_not_applicable">Not Applicable</option>
                            </select>
                            <p id="contractor-appointed-error" class="text-red-500 hidden" data-i18n="wizard.step_3.contractor_appointed_error">Please select an option.</p>
                        </div>
                    </form>
                </div>
                <div id="step-4" class="step hidden">
                    <h4 class="text-xl font-semibold mb-2" data-i18n="wizard.step_4.title">Step 4 of 9: Contractor Details</h4>
                    <form id="contractor-details-form" class="space-y-4">
                        <div>
                            <label for="contractor-name" class="block text-gray-700" data-i18n="wizard.step_4.contractor_name_label">Contractor Company Name:</label>
                            <input type="text" id="contractor-name" name="contractor-name" class="w-full border rounded p-2">
                            <p id="contractor-name-error" class="text-red-500 hidden" data-i18n="wizard.step_4.contractor_name_error">Please enter the contractor company name.</p>
                        </div>
                        <div>
                            <label for="contractor-address" class="block text-gray-700" data-i18n="wizard.step_4.contractor_address_label">Contractor Address:</label>
                            <input type="text" id="contractor-address" name="contractor-address" class="w-full border rounded p-2">
                            <p id="contractor-address-error" class="text-red-500 hidden" data-i18n="wizard.step_4.contractor_address_error">Please enter the contractor address.</p>
                        </div>
                        <div>
                            <label for="contractor-contact-person" class="block text-gray-700" data-i18n="wizard.step_4.contractor_contact_person_label">Contractor Contact Person:</label>
                            <input type="text" id="contractor-contact-person" name="contractor-contact-person" class="w-full border rounded p-2">
                            <p id="contractor-contact-person-error" class="text-red-500 hidden" data-i18n="wizard.step_4.contractor_contact_person_error">Please enter the contractor contact person.</p>
                        </div>
                        <div>
                            <label for="contractor-contact-role" class="block text-gray-700" data-i18n="wizard.step_4.contractor_contact_role_label">Contractor Contact Role:</label>
                            <input type="text" id="contractor-contact-role" name="contractor-contact-role" class="w-full border rounded p-2">
                            <p id="contractor-contact-role-error" class="text-red-500 hidden" data-i18n="wizard.step_4.contractor_contact_role_error">Please enter the contractor contact role.</p>
                        </div>
                        <div>
                            <label for="contractor-contact-number" class="block text-gray-700" data-i18n="wizard.step_4.contractor_contact_number_label">Contractor Contact Number:</label>
                            <input type="tel" id="contractor-contact-number" name="contractor-contact-number" class="w-full border rounded p-2">
                            <p id="contractor-contact-number-error" class="text-red-500 hidden" data-i18n="wizard.step_4.contractor_contact_number_error">Please enter a valid phone number (e.g., +27123456789).</p>
                        </div>
                        <div>
                            <label for="contractor-email" class="block text-gray-700" data-i18n="wizard.step_4.contractor_email_label">Contractor Email:</label>
                            <input type="email" id="contractor-email" name="contractor-email" class="w-full border rounded p-2">
                            <p id="contractor-email-error" class="text-red-500 hidden" data-i18n="wizard.step_4.contractor_email_error">Please enter a valid email address.</p>
                        </div>
                        <div>
                            <label for="contractor-coida" class="block text-gray-700" data-i18n="wizard.step_4.contractor_coida_label">COIDA Registration Number:</label>
                            <input type="text" id="contractor-coida" name="contractor-coida" class="w-full border rounded p-2">
                            <p id="contractor-coida-error" class="text-red-500 hidden" data-i18n="wizard.step_4.contractor_coida_error">Please enter the COIDA registration number.</p>
                        </div>
                    </form>
                </div>
                <div id="step-5" class="step hidden">
                    <h4 class="text-xl font-semibold mb-2" data-i18n="wizard.step_5.title">Step 5 of 9: Project Details</h4>
                    <form id="project-details-form" class="space-y-4">
                        <div>
                            <label for="project-reference" class="block text-gray-700" data-i18n="wizard.step_5.project_reference_label">Project Reference Number:</label>
                            <input type="text" id="project-reference" name="project-reference" class="w-full border rounded p-2">
                        </div>
                        <div>
                            <label for="project-name" class="block text-gray-700" data-i18n="wizard.step_5.project_name_label">Project Name:</label>
                            <input type="text" id="project-name" name="project-name" class="w-full border rounded p-2">
                            <p id="project-name-error" class="text-red-500 hidden" data-i18n="wizard.step_5.project_name_error">Please enter the project name.</p>
                        </div>
                        <div>
                            <label for="site-address" class="block text-gray-700" data-i18n="wizard.step_5.site_address_label">Site Address:</label>
                            <input type="text" id="site-address" name="site-address" class="w-full border rounded p-2">
                            <p id="site-address-error" class="text-red-500 hidden" data-i18n="wizard.step_5.site_address_error">Please enter the site address.</p>
                        </div>
                        <div>
                            <label for="site-supervisor-name" class="block text-gray-700" data-i18n="wizard.step_5.site_supervisor_name_label">Site Supervisor Name:</label>
                            <input type="text" id="site-supervisor-name" name="site-supervisor-name" class="w-full border rounded p-2">
                            <p id="site-supervisor-name-error" class="text-red-500 hidden" data-i18n="wizard.step_5.site_supervisor_name_error">Please enter the site supervisor name.</p>
                        </div>
                        <div>
                            <label for="site-supervisor-number" class="block text-gray-700" data-i18n="wizard.step_5.site_supervisor_number_label">Site Supervisor Contact Number:</label>
                            <input type="tel" id="site-supervisor-number" name="site-supervisor-number" class="w-full border rounded p-2">
                            <p id="site-supervisor-number-error" class="text-red-500 hidden" data-i18n="wizard.step_5.site_supervisor_number_error">Please enter a valid phone number (e.g., +27123456789).</p>
                        </div>
                        <div>
                            <label for="site-supervisor-email" class="block text-gray-700" data-i18n="wizard.step_5.site_supervisor_email_label">Site Supervisor Email:</label>
                            <input type="email" id="site-supervisor-email" name="site-supervisor-email" class="w-full border rounded p-2">
                            <p id="site-supervisor-email-error" class="text-red-500 hidden" data-i18n="wizard.step_5.site_supervisor_email_error">Please enter a valid email address.</p>
                        </div>
                    </form>
                </div>
                <div id="step-6" class="step hidden">
                    <h4 class="text-xl font-semibold mb-2" data-i18n="wizard.step_6.title">Step 6 of 9: Project Scope</h4>
                    <form id="project-scope-form" class="space-y-4">
                        <div>
                            <label for="type-of-work" class="block text-gray-700" data-i18n="wizard.step_6.type_of_work_label">Type of Work to be Performed:</label>
                            <input type="text" id="type-of-work" name="type-of-work" class="w-full border rounded p-2">
                            <p id="type-of-work-error" class="text-red-500 hidden" data-i18n="wizard.step_6.type_of_work_error">Please enter the type of work.</p>
                        </div>
                        <div>
                            <label for="cidb-grade" class="block text-gray-700" data-i18n="wizard.step_6.cidb_grade_label">CIDB Grade:</label>
                            <select id="cidb-grade" name="cidb-grade" class="w-full border rounded p-2">
                                <option value="" disabled selected>Select a grade</option>
                                <option value="not-applicable" data-i18n="wizard.step_6.cidb_grade_not_applicable">Not Applicable</option>
                                <option value="1" data-i18n="wizard.step_6.cidb_grade_1">Grade 1</option>
                                <option value="2" data-i18n="wizard.step_6.cidb_grade_2">Grade 2</option>
                                <option value="3" data-i18n="wizard.step_6.cidb_grade_3">Grade 3</option>
                                <option value="4" data-i18n="wizard.step_6.cidb_grade_4">Grade 4</option>
                                <option value="5" data-i18n="wizard.step_6.cidb_grade_5">Grade 5</option>
                                <option value="6" data-i18n="wizard.step_6.cidb_grade_6">Grade 6</option>
                                <option value="7" data-i18n="wizard.step_6.cidb_grade_7">Grade 7</option>
                                <option value="8" data-i18n="wizard.step_6.cidb_grade_8">Grade 8</option>
                                <option value="9" data-i18n="wizard.step_6.cidb_grade_9">Grade 9</option>
                            </select>
                            <p id="cidb-grade-error" class="text-red-500 hidden" data-i18n="wizard.step_6.cidb_grade_error">Please select a CIDB grade.</p>
                        </div>
                        <div>
                            <label for="cost" class="block text-gray-700" data-i18n="wizard.step_6.cost_label">Cost (R):</label>
                            <input type="number" id="cost" name="cost" class="w-full border rounded p-2">
                            <p id="cost-error" class="text-red-500 hidden" data-i18n="wizard.step_6.cost_error">Please enter a valid project cost (R).</p>
                        </div>
                        <div>
                            <label for="duration" class="block text-gray-700" data-i18n="wizard.step_6.duration_label">Duration (Days):</label>
                            <input type="number" id="duration" name="duration" class="w-full border rounded p-2">
                            <p id="duration-error" class="text-red-500 hidden" data-i18n="wizard.step_6.duration_error">Please enter a valid duration (days).</p>
                        </div>
                        <div>
                            <label class="block text-gray-700" data-i18n="wizard.step_6.activities_label">Involved Activities (Select all that apply):</label>
                            <div class="grid grid-cols-2 gap-2">
                                <label><input type="checkbox" name="activities" value="security-guards" class="mr-2" data-i18n="wizard.step_6.activities.security_guards">Security Guards</label>
                                <label><input type="checkbox" name="activities" value="night-work" class="mr-2" data-i18n="wizard.step_6.activities.night_work">Night Work</label>
                                <label><input type="checkbox" name="activities" value="moving-traffic" class="mr-2" data-i18n="wizard.step_6.activities.moving_traffic">Moving Traffic Work</label>
                                <label><input type="checkbox" name="activities" value="vibration-exposure" class="mr-2" data-i18n="wizard.step_6.activities.vibration_exposure">Vibration Exposure</label>
                                <label><input type="checkbox" name="activities" value="noise-exposure" class="mr-2" data-i18n="wizard.step_6.activities.noise_exposure">Noise Exposure</label>
                                <label><input type="checkbox" name="activities" value="welders" class="mr-2" data-i18n="wizard.step_6.activities.welders">Welders</label>
                                <label><input type="checkbox" name="activities" value="welding" class="mr-2" data-i18n="wizard.step_6.activities.welding">Welding</label>
                                <label><input type="checkbox" name="activities" value="hot-work" class="mr-2" data-i18n="wizard.step_6.activities.hot_work">Hot Work</label>
                                <label><input type="checkbox" name="activities" value="combustible-materials" class="mr-2" data-i18n="wizard.step_6.activities.combustible_materials">Combustible Materials</label>
                                <label><input type="checkbox" name="activities" value="hazardous-substances" class="mr-2" data-i18n="wizard.step_6.activities.hazardous_substances">Handling Hazardous Substances</label>
                                <label><input type="checkbox" name="activities" value="office-fit-out" class="mr-2" data-i18n="wizard.step_6.activities.office_fit_out">Office Fit-Out</label>
                                <label><input type="checkbox" name="activities" value="sensitive-it-equipment" class="mr-2" data-i18n="wizard.step_6.activities.sensitive_it_equipment">Sensitive IT Equipment</label>
                                <label><input type="checkbox" name="activities" value="manual-handling" class="mr-2" data-i18n="wizard.step_6.activities.manual_handling">Manual Handling</label>
                                <label><input type="checkbox" name="activities" value="working-electricity" class="mr-2" data-i18n="wizard.step_6.activities.working_electricity">Electricity Work</label>
                                <label><input type="checkbox" name="activities" value="dust-exposure" class="mr-2" data-i18n="wizard.step_6.activities.dust_exposure">Dust Exposure</label>
                                <label><input type="checkbox" name="activities" value="civil-contractors" class="mr-2" data-i18n="wizard.step_6.activities.civil_contractors">Civil Contractors</label>
                                <label><input type="checkbox" name="activities" value="excavation" class="mr-2" data-i18n="wizard.step_6.activities.excavation">Excavation</label>
                                <label><input type="checkbox" name="activities" value="crane-operations" class="mr-2" data-i18n="wizard.step_6.activities.crane_operations">Crane Operations</label>
                                <label><input type="checkbox" name="activities" value="working-near-water" class="mr-2" data-i18n="wizard.step_6.activities.working_near_water">Work Near Water</label>
                                <label><input type="checkbox" name="activities" value="pile-driving" class="mr-2" data-i18n="wizard.step_6.activities.pile_driving">Pile Driving</label>
                                <label><input type="checkbox" name="activities" value="working-tunnels" class="mr-2" data-i18n="wizard.step_6.activities.working_tunnels">Tunnel Work</label>
                                <label><input type="checkbox" name="activities" value="general-construction" class="mr-2" data-i18n="wizard.step_6.activities.general_construction">General Construction</label>
                                <label><input type="checkbox" name="activities" value="working-from-heights" class="mr-2" data-i18n="wizard.step_6.activities.working_from_heights">Working from Heights</label>
                                <label><input type="checkbox" name="activities" value="scaffolding" class="mr-2" data-i18n="wizard.step_6.activities.scaffolding">Scaffolding</label>
                                <label><input type="checkbox" name="activities" value="multi-storey" class="mr-2" data-i18n="wizard.step_6.activities.multi_storey">Multi-Storey Construction</label>
                                <label><input type="checkbox" name="activities" value="asbestos" class="mr-2" data-i18n="wizard.step_6.activities.asbestos">Asbestos Removal</label>
                                <label><input type="checkbox" name="activities" value="confined-space" class="mr-2" data-i18n="wizard.step_6.activities.confined_space">Confined Space Entry</label>
                                <label><input type="checkbox" name="activities" value="demolition" class="mr-2" data-i18n="wizard.step_6.activities.demolition">Demolition</label>
                                <label><input type="checkbox" name="activities" value="roof-work" class="mr-2" data-i18n="wizard.step_6.activities.roof_work">Roof Work</label>
                                <label><input type="checkbox" name="activities" value="temporary-works" class="mr-2" data-i18n="wizard.step_6.activities.temporary_works">Temporary Works</label>
                                <label><input type="checkbox" name="activities" value="live-voltage" class="mr-2" data-i18n="wizard.step_6.activities.live_voltage">Live Voltage Work</label>
                            </div>
                        </div>
                        <div>
                            <label for="scope-details" class="block text-gray-700" data-i18n="wizard.step_6.scope_details_label">Scope Details:</label>
                            <textarea id="scope-details" name="scope-details" class="w-full border rounded p-2"></textarea>
                            <p id="scope-details-error" class="text-red-500 hidden" data-i18n="wizard.step_6.scope_details_error">Please enter the scope details.</p>
                        </div>
                    </form>
                </div>
                <div id="step-7" class="step hidden">
                    <h4 class="text-xl font-semibold mb-2" data-i18n="wizard.step_7.title">Step 7 of 9: Compiled By</h4>
                    <form id="compiled-by-form" class="space-y-4">
                        <div>
                            <label for="compiled-by-name" class="block text-gray-700" data-i18n="wizard.step_7.name_label">Name:</label>
                            <input type="text" id="compiled-by-name" name="compiled-by-name" class="w-full border rounded p-2">
                            <p id="compiled-by-name-error" class="text-red-500 hidden" data-i18n="wizard.step_7.name_error">Please enter your name.</p>
                        </div>
                        <div>
                            <label for="compiled-by-number" class="block text-gray-700" data-i18n="wizard.step_7.number_label">Contact Number:</label>
                            <input type="tel" id="compiled-by-number" name="compiled-by-number" class="w-full border rounded p-2">
                            <p id="compiled-by-number-error" class="text-red-500 hidden" data-i18n="wizard.step_7.number_error">Please enter a valid phone number (e.g., +27123456789).</p>
                        </div>
                        <div>
                            <label for="compiled-by-email" class="block text-gray-700" data-i18n="wizard.step_7.email_label">Email:</label>
                            <input type="email" id="compiled-by-email" name="compiled-by-email" class="w-full border rounded p-2">
                            <p id="compiled-by-email-error" class="text-red-500 hidden" data-i18n="wizard.step_7.email_error">Please enter a valid email address.</p>
                        </div>
                        <div>
                            <label for="compiled-by-role" class="block text-gray-700" data-i18n="wizard.step_7.role_label">Role:</label>
                            <select id="compiled-by-role" name="compiled-by-role" class="w-full border rounded p-2">
                                <option value="" disabled selected>Select a role</option>
                                <option value="trainee" data-i18n="wizard.step_7.role_trainee">OHS Trainee</option>
                                <option value="ohs-rep" data-i18n="wizard.step_7.role_ohs_rep">OHS Representative</option>
                                <option value="sacpcmp-officer" data-i18n="wizard.step_7.role_sacpcmp_officer">SACPCMP Officer (CHSO)</option>
                                <option value="sacpcmp-agent" data-i18n="wizard.step_7.role_sacpcmp_agent">SACPCMP Agent (PrCHSA)</option>
                                <option value="other" data-i18n="wizard.step_7.role_other">Other</option>
                            </select>
                            <p id="compiled-by-role-error" class="text-red-500 hidden" data-i18n="wizard.step_7.role_error">Please select a role.</p>
                        </div>
                        <div id="sacpcmp-reg-container" class="hidden">
                            <label for="sacpcmp-reg" class="block text-gray-700" data-i18n="wizard.step_7.sacpcmp_reg_label">SACPCMP Registration Number:</label>
                            <input type="text" id="sacpcmp-reg" name="sacpcmp-reg" class="w-full border rounded p-2">
                            <p id="sacpcmp-reg-error" class="text-red-500 hidden" data-i18n="wizard.step_7.sacpcmp_reg_error">Please enter the SACPCMP registration number.</p>
                        </div>
                        <div id="specify-role-container" class="hidden">
                            <label for="specify-role" class="block text-gray-700" data-i18n="wizard.step_7.specify_role_label">Specify Role:</label>
                            <input type="text" id="specify-role" name="specify-role" class="w-full border rounded p-2">
                            <p id="specify-role-error" class="text-red-500 hidden" data-i18n="wizard.step_7.specify_role_error">Please specify your role.</p>
                        </div>
                    </form>
                </div>
                <div id="step-8" class="step hidden">
                    <h4 class="text-xl font-semibold mb-2" data-i18n="wizard.step_8.title">Step 8 of 9: Compiled For</h4>
                    <form id="compiled-for-form" class="space-y-4">
                        <div>
                            <label class="block text-gray-700" data-i18n="wizard.step_8.compiled_for_label">Compiled For:</label>
                            <select id="compiled-for" name="compiled-for" class="w-full border rounded p-2">
                                <option value="" disabled selected>Select an option</option>
                                <option value="client" data-i18n="wizard.step_8.option_client">Client</option>
                                <option value="contractor" data-i18n="wizard.step_8.option_contractor">Contractor</option>
                                <option value="other" data-i18n="wizard.step_8.option_other">Other</option>
                            </select>
                            <p id="compiled-for-error" class="text-red-500 hidden" data-i18n="wizard.step_8.compiled_for_error">Please select an option.</p>
                        </div>
                        <div id="compiled-for-specify-container" class="hidden">
                            <label for="compiled-for-specify" class="block text-gray-700" data-i18n="wizard.step_8.specify_label">Specify:</label>
                            <input type="text" id="compiled-for-specify" name="compiled-for-specify" class="w-full border rounded p-2">
                            <p id="compiled-for-specify-error" class="text-red-500 hidden" data-i18n="wizard.step_8.specify_error">Please specify who the document is compiled for.</p>
                        </div>
                    </form>
                </div>
                <div id="step-9" class="step hidden">
                    <h4 class="text-xl font-semibold mb-2" data-i18n="wizard.step_9.title">Step 9 of 9: Review and Add to Cart</h4>
                    <p class="text-gray-600 mb-4" data-i18n="wizard.step_9.description">Review your selections and add documents to your cart to proceed.</p>
                    <div id="review-section" class="space-y-4">
                        <h5 class="text-lg font-medium" data-i18n="wizard.step_9.selected_documents_label">Selected Documents:</h5>
                        <ul id="selected-documents" class="list-disc pl-5"></ul>
                    </div>
                    <button id="add-to-cart" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700" data-i18n="wizard.nav.add_to_cart">Add to Cart</button>
                </div>
                <div class="flex justify-between mt-4">
                    <button id="back-btn" class="bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400 hidden" data-i18n="wizard.nav.back">Back</button>
                    <button id="next-btn" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700" data-i18n="wizard.nav.next">Next</button>
                </div>
            </div>
        </section>

        <section class="cart bg-white p-6 rounded-lg shadow-md mb-8">
            <h3 class="text-2xl font-semibold mb-4" data-i18n="cart.title">Your Cart</h3>
            <p class="text-gray-600 mb-4" data-i18n="cart.invoice_reference">Invoice Reference Number: <span id="invoice-ref-number" class="font-medium"></span> (Valid for 7 days. Register to store indefinitely!)</p>
            <table class="w-full border-collapse">
                <thead>
                    <tr>
                        <th class="border border-gray-200 p-2 text-left" data-i18n="cart.table.document">Document</th>
                        <th class="border border-gray-200 p-2 text-left" data-i18n="cart.table.price">Price</th>
                    </tr>
                </thead>
                <tbody id="cart-items"></tbody>
            </table>
            <div class="mt-4 flex justify-between">
                <div>
                    <label for="promo-code" class="block text-gray-700" data-i18n="cart.checkout.promo_label">Promo Code:</label>
                    <input type="text" id="promo-code" placeholder="Enter SAFETYFIRST25" class="border rounded p-2" data-i18n="[placeholder]cart.checkout.promo_placeholder">
                </div>
                <button id="checkout-btn" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700" data-i18n="cart.checkout.button">Checkout</button>
            </div>
            <button id="subscribe-btn" class="mt-4 bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700" data-i18n="cart.subscribe.button">Subscribe for Full Access</button>
        </section>

        <section class="resources bg-white p-6 rounded-lg shadow-md">
            <h3 class="text-2xl font-semibold mb-4" data-i18n="resources.title">Contact Accredited H&S Professionals</h3>
            <p class="text-gray-600 mb-4" data-i18n="resources.description">Need expert assistance? Reach out to accredited professionals for your project needs.</p>
            <ul class="list-disc pl-5 space-y-2">
                <li data-i18n="resources.jane_doe"><strong>Jane Doe, SACPCMP Agent (PrCHSA)</strong> - Reg No: PR12345 - Contact: <a href="mailto:jane.doe@example.com" class="text-blue-500 hover:underline">jane.doe@example.com</a></li>
                <li data-i18n="resources.john_smith"><strong>John Smith, SACPCMP Officer (CHSO)</strong> - Reg No: CHSO67890 - Contact: <a href="mailto:john.smith@example.com" class="text-blue-500 hover:underline">john.smith@example.com</a></li>
                <li data-i18n="resources.emily_brown"><strong>Emily Brown, OHS Representative</strong> - Contact: <a href="mailto:emily.brown@example.com" class="text-blue-500 hover:underline">emily.brown@example.com</a></li>
            </ul>
        </section>
    </main>

    <footer class="bg-gray-800 text-white py-4">
        <div class="container mx-auto px-4 flex justify-between items-center">
            <div>
                <p data-i18n="footer.copyright">¬© 2025 SafetyHelp. All rights reserved.</p>
                <ul class="flex space-x-4">
                    <li><a href="/safety-plans/privacy.html" class="hover:underline" data-i18n="footer.links.privacy">Privacy Policy</a></li>
                    <li><a href="/safety-plans/terms.html" class="hover:underline" data-i18n="footer.links.terms">Terms of Service</a></li>
                    <li><a href="/safety-plans/contact.html" class="hover:underline" data-i18n="footer.links.contact">Contact Us</a></li>
                </ul>
            </div>
            <div>
                <h4 class="text-lg font-semibold" data-i18n="footer.newsletter.title">Stay Updated</h4>
                <input type="email" placeholder="Enter your email" class="border rounded p-2 w-64" data-i18n="[placeholder]footer.newsletter.placeholder">
                <button class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700" data-i18n="footer.newsletter.button">Subscribe</button>
            </div>
        </div>
    </footer>

    <div id="chatbot" class="fixed bottom-4 right-4 bg-white rounded-lg shadow-lg p-4 w-80 hidden">
        <h4 class="text-lg font-semibold" data-i18n="chatbot.button">Ask Salatiso</h4>
        <div id="chatbot-messages" class="h-64 overflow-y-auto mb-2"></div>
        <input type="text" id="chatbot-input" placeholder="Ask about OHS..." class="w-full border rounded p-2 mb-2" data-i18n="[placeholder]chatbot.input_placeholder">
        <button id="chatbot-send" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 w-full" data-i18n="chatbot.send">Send</button>
    </div>
    <button id="chatbot-toggle" class="fixed bottom-4 right-4 bg-blue-600 text-white rounded-full p-4 shadow-lg" data-i18n="chatbot.button">Ask Salatiso</button>

    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDASGZnUyav23Mte5Q96H0j-T3LlGzVK-k",
            authDomain: "safetyfirst2025-aea34.firebaseapp.com",
            projectId: "safetyfirst2025-aea34",
            storageBucket: "safetyfirst2025-aea34.firebasestorage.app",
            messagingSenderId: "620306944192",
            appId: "1:620306944192:web:ddadeef6825901068a9d25",
            measurementId: "G-VQL1FCD8NN"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const analytics = firebase.analytics();

        // i18next Initialization
        const languages = ['en', 'af', 'zu', 'xh', 'st', 'tn', 'nso', 'ts', 'ss', 've', 'nr', 'es', 'fr', 'sn', 'sw', 'zh'];
        i18next
            .use(i18nextHttpBackend)
            .init({
                lng: 'en',
                fallbackLng: 'en',
                backend: {
                    loadPath: '/safety-plans/assets/locales/{{lng}}/translation.json'
                }
            }, function(err, t) {
                updateContent();
            });

        function updateContent() {
            document.querySelectorAll('[data-i18n]').forEach(element => {
                const key = element.getAttribute('data-i18n');
                if (key.startsWith('[')) {
                    const [attr, value] = key.match(/\[(.*?)\](.*)/).slice(1);
                    element.setAttribute(attr, i18next.t(value));
                } else {
                    element.innerHTML = i18next.t(key);
                }
            });
        }

        // Language Switcher
        document.addEventListener('DOMContentLoaded', () => {
            const languageSelector = document.createElement('select');
            languageSelector.id = 'language-selector';
            languageSelector.className = 'border rounded p-2';
            languages.forEach(lang => {
                const option = document.createElement('option');
                option.value = lang;
                option.textContent = i18next.t(`language_selector.${lang}`);
                languageSelector.appendChild(option);
            });
            document.querySelector('header .container').appendChild(languageSelector);

            languageSelector.addEventListener('change', (e) => {
                i18next.changeLanguage(e.target.value, () => {
                    updateContent();
                });
            });
        });

        // Wizard Navigation
        let currentStep = 0;
        const steps = document.querySelectorAll('.step');
        const backBtn = document.getElementById('back-btn');
        const nextBtn = document.getElementById('next-btn');
        const formData = {
            documents: [],
            clientDetails: {},
            contractorAppointed: null,
            contractorDetails: {},
            projectDetails: {},
            projectScope: { activities: [] },
            compiledBy: {},
            compiledFor: {}
        };

        function showStep(stepIndex) {
            steps.forEach((step, index) => {
                step.classList.toggle('hidden', index !== stepIndex);
            });
            backBtn.classList.toggle('hidden', stepIndex === 0);
            nextBtn.textContent = stepIndex === steps.length - 1 ? i18next.t('wizard.nav.add_to_cart') : i18next.t('wizard.nav.next');
            currentStep = stepIndex;
        }

        function validateStep(stepIndex) {
            let isValid = true;
            if (stepIndex === 1) {
                const checkboxes = document.querySelectorAll('input[name="documents"]:checked');
                formData.documents = Array.from(checkboxes).map(cb => cb.value);
                if (formData.documents.length === 0) {
                    document.getElementById('step-1-error').classList.remove('hidden');
                    isValid = false;
                } else {
                    document.getElementById('step-1-error').classList.add('hidden');
                }
            } else if (stepIndex === 2) {
                const form = document.getElementById('client-details-form');
                const inputs = form.querySelectorAll('input');
                inputs.forEach(input => {
                    const errorElement = document.getElementById(`${input.id}-error`);
                    if (!input.value.trim()) {
                        errorElement.classList.remove('hidden');
                        isValid = false;
                    } else {
                        errorElement.classList.add('hidden');
                        formData.clientDetails[input.name] = input.value.trim();
                    }
                });
            }
            // Add validation for other steps as needed
            return isValid;
        }

        backBtn.addEventListener('click', () => {
            if (currentStep > 0) {
                showStep(currentStep - 1);
            }
        });

        nextBtn.addEventListener('click', () => {
            if (validateStep(currentStep)) {
                if (currentStep < steps.length - 1) {
                    showStep(currentStep + 1);
                } else {
                    addToCart();
                }
            }
        });

        function addToCart() {
            const cartItems = document.getElementById('cart-items');
            cartItems.innerHTML = '';
            formData.documents.forEach(doc => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td class="border border-gray-200 p-2">${i18next.t(`wizard.step_1.${doc}`)}</td>
                    <td class="border border-gray-200 p-2">R200</td>
                `;
                cartItems.appendChild(row);
            });
            document.getElementById('invoice-ref-number').textContent = `INV-${Date.now()}`;
            document.getElementById('wizard').classList.add('hidden');
            document.querySelector('.cart').classList.remove('hidden');
        }

        // Compile Document Function
        function compileDocument(docType, formData) {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            let yOffset = 10;

            // Cover Page
            doc.setFontSize(20);
            doc.text(i18next.t(`wizard.step_1.${docType}`), 10, yOffset);
            yOffset += 10;
            doc.setFontSize(12);
            doc.text(`Reference: OHSS-001`, 10, yOffset);
            yOffset += 5;
            doc.text(`Issue Date: ${new Date().toLocaleDateString()}`, 10, yOffset);
            yOffset += 5;
            doc.text(`Client: ${formData.clientDetails.name}`, 10, yOffset);
            yOffset += 5;
            doc.text(`Compiled By: ${formData.compiledBy.name}, ${i18next.t(`wizard.step_7.role_${formData.compiledBy.role}`)}`, 10, yOffset);
            yOffset += 10;

            // Introduction
            doc.text('1. Introduction', 10, yOffset);
            yOffset += 5;
            doc.text('This Health and Safety Specification outlines requirements for the project, ensuring compliance with the OHS Act and Construction Regulations.', 10, yOffset, { maxWidth: 180 });
            yOffset += 15;

            // Client Details
            doc.text('2. Client Details', 10, yOffset);
            yOffset += 5;
            doc.text(`Company Name: ${formData.clientDetails.name}`, 10, yOffset);
            yOffset += 5;
            doc.text(`Address: ${formData.clientDetails.address}`, 10, yOffset);
            yOffset += 5;
            doc.text(`Contact Person: ${formData.clientDetails.contactPerson}`, 10, yOffset);
            yOffset += 5;
            doc.text(`Contact Role: ${formData.clientDetails.contactRole}`, 10, yOffset);
            yOffset += 5;
            doc.text(`Contact Number: ${formData.clientDetails.contactNumber}`, 10, yOffset);
            yOffset += 5;
            doc.text(`Email: ${formData.clientDetails.email}`, 10, yOffset);
            yOffset += 5;
            doc.text(`COIDA Registration: ${formData.clientDetails.coida}`, 10, yOffset);
            yOffset += 10;

            // Project Details
            doc.text('3. Project Description', 10, yOffset);
            yOffset += 5;
            doc.text(`Reference Number: ${formData.projectDetails.reference || 'N/A'}`, 10, yOffset);
            yOffset += 5;
            doc.text(`Project Name: ${formData.projectDetails.name}`, 10, yOffset);
            yOffset += 5;
            doc.text(`Site Address: ${formData.projectDetails.siteAddress}`, 10, yOffset);
            yOffset += 5;
            doc.text(`Site Supervisor Name: ${formData.projectDetails.siteSupervisorName}`, 10, yOffset);
            yOffset += 5;
            doc.text(`Site Supervisor Contact: ${formData.projectDetails.siteSupervisorNumber}`, 10, yOffset);
            yOffset += 5;
            doc.text(`Site Supervisor Email: ${formData.projectDetails.siteSupervisorEmail}`, 10, yOffset);
            yOffset += 10;

            // Project Scope
            doc.text('4. Project Scope', 10, yOffset);
            yOffset += 5;
            doc.text(`Type of Work: ${formData.projectScope.typeOfWork}`, 10, yOffset);
            yOffset += 5;
            doc.text(`CIDB Grade: ${formData.projectScope.cidbGrade}`, 10, yOffset);
            yOffset += 5;
            doc.text(`Cost (R): ${formData.projectScope.cost}`, 10, yOffset);
            yOffset += 5;
            doc.text(`Duration (Days): ${formData.projectScope.duration}`, 10, yOffset);
            yOffset += 5;
            doc.text('Key Activities:', 10, yOffset);
            yOffset += 5;
            formData.projectScope.activities.forEach(activity => {
                doc.text(`- ${i18next.t(`wizard.step_6.activities.${activity}`)}`, 15, yOffset);
                yOffset += 5;
            });
            doc.text(`Scope Details: ${formData.projectScope.scopeDetails}`, 10, yOffset);
            yOffset += 10;

            // Legal Requirements
            doc.text('5. Legal Requirements', 10, yOffset);
            yOffset += 5;
            doc.text('This specification complies with:', 10, yOffset);
            yOffset += 5;
            doc.text('- Occupational Health and Safety Act, 1993', 15, yOffset);
            yOffset += 5;
            doc.text('- Construction Regulations, 2014', 15, yOffset);
            yOffset += 5;
            doc.text('- COIDA, 1993', 15, yOffset);
            yOffset += 5;
            doc.text('- SACPCMP Guidelines', 15, yOffset);
            yOffset += 10;

            // Roles and Responsibilities
            doc.text('6. Roles and Responsibilities', 10, yOffset);
            yOffset += 5;
            doc.text('Client: Provide specification, appoint H&S Agent, approve plan.', 10, yOffset);
            yOffset += 5;
            doc.text('Principal Contractor: Develop H&S Plan, manage site safety, appoint CHSO.', 10, yOffset);
            yOffset += 10;

            // Activity-Specific Requirements
            doc.text('7. Activity-Specific Requirements', 10, yOffset);
            yOffset += 5;
            formData.projectScope.activities.forEach(activity => {
                if (activity === 'scaffolding') {
                    doc.text('7.1 Scaffolding', 10, yOffset);
                    yOffset += 5;
                    doc.text('Description: Erection, use, and dismantling of scaffolding.', 10, yOffset);
                    yOffset += 5;
                    doc.text('Hazards: Falls, scaffold collapse.', 10, yOffset);
                    yOffset += 5;
                    doc.text('Controls: Competent erectors, weekly inspections, fall arrest systems.', 10, yOffset);
                    yOffset += 5;
                    doc.text('Legal: Construction Regulation 16.', 10, yOffset);
                    yOffset += 5;
                } else if (activity === 'security-guards') {
                    doc.text('7.2 Security Guards', 10, yOffset);
                    yOffset += 5;
                    doc.text('Description: Monitoring site access and safety.', 10, yOffset);
                    yOffset += 5;
                    doc.text('Hazards: Unauthorized access, violence.', 10, yOffset);
                    yOffset += 5;
                    doc.text('Controls: PSIRA-registered personnel, rest periods.', 10, yOffset);
                    yOffset += 5;
                    doc.text('Legal: Private Security Industry Regulation Act.', 10, yOffset);
                    yOffset += 5;
                } else if (activity === 'vibration-exposure') {
                    doc.text('7.3 Vibration Exposure', 10, yOffset);
                    yOffset += 5;
                    doc.text('Description: Use of vibrating equipment.', 10, yOffset);
                    yOffset += 5;
                    doc.text('Hazards: Hand-arm vibration syndrome.', 10, yOffset);
                    yOffset += 5;
                    doc.text('Controls: Low-vibration tools, breaks, anti-vibration gloves.', 10, yOffset);
                    yOffset += 5;
                    doc.text('Legal: Construction Regulation 9.', 10, yOffset);
                    yOffset += 5;
                }
                // Add more activity sections as needed
            });

            // General Safety Requirements
            doc.text('8. General Safety Requirements', 10, yOffset);
            yOffset += 5;
            doc.text('PPE: Hard hats, safety boots, high-visibility vests required.', 10, yOffset);
            yOffset += 5;
            doc.text('Emergency Procedures: Evacuation plans and emergency contacts mandatory.', 10, yOffset);
            yOffset += 5;
            doc.text('First Aid: Trained first aiders and facilities required.', 10, yOffset);
            yOffset += 5;
            doc.text('Welfare Facilities: Provide water, sanitation, rest areas.', 10, yOffset);
            yOffset += 10;

            // Monitoring and Compliance
            doc.text('9. Monitoring and Compliance', 10, yOffset);
            yOffset += 5;
            doc.text('H&S File: Maintain risk assessments, training records.', 10, yOffset);
            yOffset += 5;
            doc.text('Audits: Bi-monthly by H&S Agent.', 10, yOffset);
            yOffset += 10;

            // Compiled By
            doc.text('10. Compiled By', 10, yOffset);
            yOffset += 5;
            doc.text(`Name: ${formData.compiledBy.name}`, 10, yOffset);
            yOffset += 5;
            doc.text(`Contact Number: ${formData.compiledBy.number}`, 10, yOffset);
            yOffset += 5;
            doc.text(`Email: ${formData.compiledBy.email}`, 10, yOffset);
            yOffset += 5;
            doc.text(`Role: ${i18next.t(`wizard.step_7.role_${formData.compiledBy.role}`)}`, 10, yOffset);
            yOffset += 10;

            // Compiled For
            doc.text('11. Compiled For', 10, yOffset);
            yOffset += 5;
            doc.text(`${i18next.t(`wizard.step_8.option_${formData.compiledFor.for}`)}`, 10, yOffset);

            // Save PDF
            doc.save(`${formData.projectDetails.name || 'document'}_HSS.pdf`);
            return doc;
        }

        // Chatbot Functionality
        document.getElementById('chatbot-toggle').addEventListener('click', () => {
            const chatbot = document.getElementById('chatbot');
            chatbot.classList.toggle('hidden');
            if (!chatbot.classList.contains('hidden')) {
                document.getElementById('chatbot-messages').innerHTML = `<p>${i18next.t('chatbot.welcome')}</p>`;
            }
        });

        document.getElementById('chatbot-send').addEventListener('click', async () => {
            const input = document.getElementById('chatbot-input');
            const message = input.value.trim();
            if (!message) return;

            const messages = document.getElementById('chatbot-messages');
            messages.innerHTML += `<p><strong>You:</strong> ${message}</p>`;
            input.value = '';

            try {
                const response = await db.collection('ohs-knowledge').where('keywords', 'array-contains', message.toLowerCase()).get();
                if (!response.empty) {
                    response.forEach(doc => {
                        messages.innerHTML += `<p><strong>Salatiso:</strong> ${doc.data().content}</p>`;
                    });
                } else {
                    messages.innerHTML += `<p><strong>Salatiso:</strong> ${i18next.t('chatbot.response')}</p>`;
                }
            } catch (error) {
                console.error('Error querying Firestore:', error);
                messages.innerHTML += `<p><strong>Salatiso:</strong> Sorry, something went wrong. Please try again.</p>`;
            }
            messages.scrollTop = messages.scrollHeight;
        });
    </script>
</body>
</html>
