<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Coming soon: [Tool Name] tool by Safety First OHS Tools. Suggest features by emailing us!">
    <meta name="keywords" content="OHS tools, construction safety, South Africa, [Tool Name]">
    <meta name="author" content="Salatiso Lonwabo Mdeni">
    <title>Safety First OHS Tools | [Tool Name]</title>
    <link rel="stylesheet" href="../assets/css/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500;700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <style>
        .coming-soon-container { max-width: 900px; margin: 20px auto; text-align: center; padding: 20px; }
        .coming-soon-container p { margin: 15px 0; }
        .coming-soon-container a { color: #007bff; text-decoration: none; }
        .coming-soon-container a:hover { text-decoration: underline; }
    </style>
</head>
<body>
    <div class="sidebar">
        <div class="sidebar-content">
            <h3>OHS Tools</h3>
            <a href="pages/construction-compliance.html"><span class="icon">üèóÔ∏è</span> Construction Health and Safety</a>
            <a href="pages/emergency-response-plan.html"><span class="icon">üö®</span> Emergency Response Planning</a>
            <a href="pages/risk-assessment.html"><span class="icon">‚ö†Ô∏è</span> Risk Assessment</a>
            <a href="pages/legal-appointments.html"><span class="icon">üìú</span> Legal Appointments</a>
            <a href="pages/incident-management.html"><span class="icon">üöë</span> Incident Management</a>
            <a href="pages/general-induction.html"><span class="icon">üéì</span> General Induction</a>
            <a href="pages/inspections-audits.html"><span class="icon">üîç</span> Inspections & Audits</a>
            <a href="pages/toolbox-talks.html"><span class="icon">üõ†Ô∏è</span> Toolbox Talks</a>
        </div>
    </div>

    <div class="main-content">
        <header>
            <h1>Safety First OHS Tools</h1>
            <nav>
                <a href="../index.html">Home</a>
                <a href="../about.html">About</a>
                <a href="../contact.html">Contact</a>
                <div class="search-bar">
                    <form role="search">
                        <input type="text" placeholder="Search OHS Tools..." aria-label="Search OHS Tools">
                        <button type="submit" aria-label="Search">Search</button>
                    </form>
                </div>
            </nav>
        </header>

        <section class="coming-soon-container">
            <h2>[Tool Name] - Coming Soon!</h2>
            <p>This tool is under development and will be available soon to help you with your OHS needs.</p>
            <p>We‚Äôd love to hear from you! Tell us what features or content you‚Äôd like to see in this tool by emailing <a href="mailto:salatiso@salatiso.com">salatiso@salatiso.com</a>.</p>
        </section>

        <footer>
            <p>¬© 2025 Safety First OHS Tools. All rights reserved.</p>
            <p><a href="../privacy.html">Privacy Policy</a> | <a href="../terms.html">Terms of Service</a> | <a href="../contact.html">Contact Us</a></p>
        </footer>
    </div>

    <script>
        document.querySelector('.sidebar-trigger').addEventListener('click', function() {
            document.querySelector('.sidebar').classList.toggle('active');
            document.querySelector('.sidebar-content').classList.toggle('active');
        });

        window.addEventListener('load', adjustLayout);
        window.addEventListener('resize', adjustLayout);
        function adjustLayout() {
            const headerHeight = document.querySelector('header').offsetHeight;
            document.querySelector('.main-content').style.paddingTop = headerHeight + 'px';
            document.querySelector('.sidebar').style.top = headerHeight + 'px';
            document.querySelector('.sidebar').style.height = `calc(100% - ${headerHeight}px)`;
        }
    </script>
    <!-- Chatbot Widget -->
<div class="chatbot-container">
    <button id="chat-toggle" class="chat-toggle-btn">
        <span class="chat-icon">‚õëÔ∏è</span> Ask Me
    </button>
    <div id="chat-window" class="chat-hidden">
        <div id="chat-output"></div>
        <input id="chat-input" type="text" placeholder="Ask about OHS...">
        <button id="chat-send">Send</button>
    </div>
</div>

<!-- Firebase Scripts and Chatbot Logic -->
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js"></script>
<script>
    // Firebase Config
    const firebaseConfig = {
        apiKey: "AIzaSyDlzylJ0WF_WMZQA2bJeqbzkEMhihYcZW0",
        authDomain: "safety-first-chatbot.firebaseapp.com",
        projectId: "safety-first-chatbot",
        storageBucket: "safety-first-chatbot.firebasestorage.app",
        messagingSenderId: "741489856541",
        appId: "1:741489856541:web:0833fa5deb60dd54c9b6f4",
        measurementId: "G-04Y1PQDYVD"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    // Toggle Chat Window
    document.getElementById('chat-toggle').addEventListener('click', () => {
        document.getElementById('chat-window').classList.toggle('chat-hidden');
    });

    // Send Question to Chatbot
    document.getElementById('chat-send').addEventListener('click', async () => {
        const input = document.getElementById('chat-input').value;
        const output = document.getElementById('chat-output');
        output.innerHTML += `<p><strong>You:</strong> ${input}</p>`;

        const query = input.toLowerCase();
        const snapshot = await db.collection('ohs-knowledge').get();
        let response = "Sorry, I couldn‚Äôt find an exact match. Try rephrasing!";
        snapshot.forEach(doc => {
            const data = doc.data();
            if (data.content.toLowerCase().includes(query)) {
                response = `<strong>From ${data.book}, Chapter ${data.chapter}:</strong><br>${data.content.substring(0, 200)}... (See <a href="/safety-plans/resources/${data.file}">full chapter</a>)`;
            }
        });
        output.innerHTML += `<p><strong>Chatbot:</strong> ${response}</p>`;
        document.getElementById('chat-input').value = '';
        output.scrollTop = output.scrollHeight;
    });

    // Adjust Layout
    window.addEventListener('load', adjustLayout);
    window.addEventListener('resize', adjustLayout);
    function adjustLayout() {
        const headerHeight = document.querySelector('header').offsetHeight || 0;
        const sidebar = document.querySelector('.sidebar');
        const mainContent = document.querySelector('.main-content');
        if (sidebar && mainContent) {
            sidebar.style.top = `${headerHeight}px`;
            sidebar.style.height = `calc(100vh - ${headerHeight}px)`;
            mainContent.style.marginLeft = `${sidebar.offsetWidth}px`;
            mainContent.style.paddingTop = `${headerHeight}px`;
            mainContent.style.minHeight = `calc(100vh - ${headerHeight}px)`;
        }
    }
</script>
</body>
</html>
