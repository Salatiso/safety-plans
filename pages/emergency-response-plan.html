<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Emergency Response Planning tool coming soon to Safety First OHS Tools. Help us shape this tool by sharing your ideas!">
    <meta name="keywords" content="emergency response plan, OHS compliance South Africa, occupational health and safety tools, workplace safety">
    <meta name="author" content="Salatiso Lonwabo Mdeni">
    <title>Emergency Response Plan | Safety First OHS Tools</title>
    <link rel="stylesheet" href="../assets/css/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500;700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Sidebar Menu -->
    <div class="sidebar">
        <div class="sidebar-content">
            <h3>OHS Tools</h3>
            <a href="pages/construction-compliance.html"><span class="icon">üèóÔ∏è</span> Construction Health and Safety</a>
            <a href="pages/emergency-response-plan.html"><span class="icon">üö®</span> Emergency Response Planning</a>
            <a href="pages/risk-assessment.html"><span class="icon">‚ö†Ô∏è</span> Risk Assessment</a>
            <a href="pages/legal-appointments.html"><span class="icon">üìú</span> Legal Appointments</a>
            <a href="pages/incident-management.html"><span class="icon">üöë</span> Incident Management</a>
            <a href="pages/general-induction.html"><span class="icon">üéì</span> General Induction</a>
            <a href="pages/inspections-audits.html"><span class="icon">üîç</span> Inspections & Audits</a>
            <a href="pages/toolbox-talks.html"><span class="icon">üõ†Ô∏è</span> Toolbox Talks</a>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <header>
            <h1>Safety First OHS Tools</h1>
            <nav>
                <a href="../index.html">Home</a>
                <a href="../about.html">About</a>
                <a href="../contact.html">Contact</a>
                <div class="search-bar">
                    <form role="search">
                        <input type="text" placeholder="Search OHS Tools..." aria-label="Search OHS Tools">
                        <button type="submit" aria-label="Search">Search</button>
                    </form>
                </div>
            </nav>
        </header>

        <!-- Placeholder Section -->
        <section class="intro">
            <h2>Emergency Response Planning Tool ‚Äì Coming Soon!</h2>
            <p>
                We‚Äôre excited to announce that our <strong>Emergency Response Planning Tool</strong> is currently in development! This tool will help you create comprehensive emergency response plans to ensure safety and compliance with South African OHS regulations, protecting your team in critical situations.
            </p>
        </section>

        <!-- Teaser and Contribution Section -->
        <section class="content">
            <h2>What‚Äôs Coming?</h2>
            <p>
                The Emergency Response Planning Tool will empower you to:
            </p>
            <div class="responsibilities-container">
                <div class="responsibility-table teaser-table">
                    <h3>Prepare for Any Crisis</h3>
                    <table>
                        <tbody>
                            <tr>
                                <td>Develop tailored emergency response plans for your workplace.</td>
                            </tr>
                            <tr>
                                <td>Identify potential hazards and create evacuation procedures.</td>
                            </tr>
                            <tr>
                                <td>Assign roles and responsibilities for emergency situations.</td>
                            </tr>
                            <tr>
                                <td>Ensure compliance with the <strong>Occupational Health and Safety Act, 1993</strong>.</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <h2>Help Us Shape This Tool!</h2>
            <p>
                We want to make this tool as valuable as possible for you. Have ideas about what you‚Äôd like to see in the Emergency Response Planning Tool? Whether it‚Äôs specific features, templates, or resources, we‚Äôd love to hear from you! Your input will help us create a tool that truly meets your needs.
            </p>
            <p>
                <a href="../contact.html" class="cta-button contribute-button">Share Your Ideas</a>
            </p>
        </section>

        <!-- Footer -->
        <footer>
            <p>¬© 2025 Safety First OHS Tools. All rights reserved.</p>
            <p>
                <a href="../privacy.html">Privacy Policy</a> | 
                <a href="../terms.html">Terms of Service</a> | 
                <a href="../contact.html">Contact Us</a>
            </p>
        </footer>
    </div>

    <!-- JavaScript -->
    <script>
        // Sidebar Toggle for Mobile
        document.querySelector('.sidebar-trigger').addEventListener('click', function() {
            document.querySelector('.sidebar').classList.toggle('active');
        });

        // Category Toggle for Sidebar
        document.querySelectorAll('.category-toggle').forEach(button => {
            button.addEventListener('click', function() {
                const content = this.nextElementSibling;
                content.classList.toggle('active');
                this.classList.toggle('active');
            });
        });

        // Set Active Link in Sidebar
        document.addEventListener('DOMContentLoaded', function() {
            const currentPath = window.location.pathname;
            const sidebarLinks = document.querySelectorAll('.sidebar-content a');
            sidebarLinks.forEach(link => {
                if (link.getAttribute('href') === currentPath || link.getAttribute('href') === currentPath.replace(/^\/safety-plans\//, '')) {
                    link.classList.add('active');
                    // Expand the parent category if the active link is inside one
                    const categoryContent = link.closest('.category-content');
                    if (categoryContent) {
                        categoryContent.classList.add('active');
                        categoryContent.previousElementSibling.classList.add('active');
                    }
                }
            });
        });

        // Dynamically set padding-top for main content and top for sidebar based on header height
        window.addEventListener('load', function() {
            const headerHeight = document.querySelector('header').offsetHeight;
            document.querySelector('.main-content').style.paddingTop = headerHeight + 'px';
            document.querySelector('.sidebar').style.top = headerHeight + 'px';
            document.querySelector('.sidebar').style.height = `calc(100% - ${headerHeight}px)`;
        });

        window.addEventListener('resize', function() {
            const headerHeight = document.querySelector('header').offsetHeight;
            document.querySelector('.main-content').style.paddingTop = headerHeight + 'px';
            document.querySelector('.sidebar').style.top = headerHeight + 'px';
            document.querySelector('.sidebar').style.height = `calc(100% - ${headerHeight}px)`;
        });
    </script>
    <!-- Chatbot Widget -->
<div class="chatbot-container">
    <button id="chat-toggle" class="chat-toggle-btn">
        <span class="chat-icon">‚õëÔ∏è</span> Ask Me
    </button>
    <div id="chat-window" class="chat-hidden">
        <div id="chat-output"></div>
        <input id="chat-input" type="text" placeholder="Ask about OHS...">
        <button id="chat-send">Send</button>
    </div>
</div>

<!-- Firebase Scripts and Chatbot Logic -->
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js"></script>
<script>
    // Firebase Config
    const firebaseConfig = {
        apiKey: "AIzaSyDlzylJ0WF_WMZQA2bJeqbzkEMhihYcZW0",
        authDomain: "safety-first-chatbot.firebaseapp.com",
        projectId: "safety-first-chatbot",
        storageBucket: "safety-first-chatbot.firebasestorage.app",
        messagingSenderId: "741489856541",
        appId: "1:741489856541:web:0833fa5deb60dd54c9b6f4",
        measurementId: "G-04Y1PQDYVD"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    // Toggle Chat Window
    document.getElementById('chat-toggle').addEventListener('click', () => {
        document.getElementById('chat-window').classList.toggle('chat-hidden');
    });

    // Send Question to Chatbot
    document.getElementById('chat-send').addEventListener('click', async () => {
        const input = document.getElementById('chat-input').value;
        const output = document.getElementById('chat-output');
        output.innerHTML += `<p><strong>You:</strong> ${input}</p>`;

        const query = input.toLowerCase();
        const snapshot = await db.collection('ohs-knowledge').get();
        let response = "Sorry, I couldn‚Äôt find an exact match. Try rephrasing!";
        snapshot.forEach(doc => {
            const data = doc.data();
            if (data.content.toLowerCase().includes(query)) {
                response = `<strong>From ${data.book}, Chapter ${data.chapter}:</strong><br>${data.content.substring(0, 200)}... (See <a href="/safety-plans/resources/${data.file}">full chapter</a>)`;
            }
        });
        output.innerHTML += `<p><strong>Chatbot:</strong> ${response}</p>`;
        document.getElementById('chat-input').value = '';
        output.scrollTop = output.scrollHeight;
    });

    // Adjust Layout
    window.addEventListener('load', adjustLayout);
    window.addEventListener('resize', adjustLayout);
    function adjustLayout() {
        const headerHeight = document.querySelector('header').offsetHeight || 0;
        const sidebar = document.querySelector('.sidebar');
        const mainContent = document.querySelector('.main-content');
        if (sidebar && mainContent) {
            sidebar.style.top = `${headerHeight}px`;
            sidebar.style.height = `calc(100vh - ${headerHeight}px)`;
            mainContent.style.marginLeft = `${sidebar.offsetWidth}px`;
            mainContent.style.paddingTop = `${headerHeight}px`;
            mainContent.style.minHeight = `calc(100vh - ${headerHeight}px)`;
        }
    }
</script>
</body>
</html>
